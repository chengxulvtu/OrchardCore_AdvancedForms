@model List<AdvancedForms.ViewModels.AdvFormsDisplayViewModel>
<style asp-src="/AdvancedForms/Styles/display.css"></style>
<style>
    #mainNav {
        background-color: #212529 !important;
        padding-top: 0px;
        padding-bottom: 0px;
    }

    #main {
        padding-top: 70px;
    }

    label {
        color: #000 !important;
    }

    .panel-heading h4 {
        font-size: 18px;
    }
</style>
<script asp-src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js" at="Head"></script>
<div class="row">
    <div class="col-lg-12 text-center">
        <h2 class="section-heading text-uppercase">ADVANCED FORMS</h2>
    </div>
</div>
<hr />
<div class="row">
    <div class="col-md-6">

    </div>
    <div class="col-md-6">
        <div class="input-group">
            <input class="form-control" type="text" placeholder="Filter by Form Title" id="inputTitle">
            <div class="input-group-prepend">
                <button class="input-group-text bg-secondary" id="btnSearch" style="background-color: transparent !important;color: #000 !important;">
                    <i class="fa fa-search" aria-hidden="true"></i>
                </button>
            </div>
        </div><br />
    </div>
</div>
<div class="row">
    @foreach (var item in Model)
    {
        <div class="col-md-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4>
                        <a data-toggle="collapse" href="#@item.Type.Replace(" ","_")" onclick="collapseShow('@item.Type.Replace(" ","_")')" style="color:#fff;text-decoration:none;display:block;">@item.Type <i class="fa fa-minus" style="float:right;"></i></a>
                    </h4>
                </div>
                <div id="@item.Type.Replace(" ","_")" class="panel-collapse collapse show">
                    @foreach (var form in item.Items)
                    {
                        <a href="@form.Action" class="list-group-item fort-group-item-action">
                            <strong><span>@form.DisplayText</span></strong><br />
                            <label style="cursor:pointer;">@Html.Raw(form.Description)</label>
                        </a>
                    }
                </div>
            </div>
        </div>
    }
    
    
    <div class="col-md-12 alert alert-info" style="display:none;">
        <strong>@T["No Item!"]</strong> @T["Not found any form with above filter."]
    </div>
</div>

<script>
    $(document).ready(function () {
        $(".collapse.in").each(function () {
            $(this).siblings(".panel-heading").find(".fa").addClass("fa-minus").removeClass("fa-plus");
        });
        $(".collapse").on('show.bs.collapse', function () {
            $(this).parent().find(".fa").removeClass("fa-plus").addClass("fa-minus");
        }).on('hide.bs.collapse', function () {
            $(this).parent().find(".fa").removeClass("fa-minus").addClass("fa-plus");
        });

        $("#btnSearch").click(function () {
            $(".collapse").collapse('show');
            var searchTitle = $("#inputTitle").val().toLowerCase();
            $(".panel a span").each(function () {
                var currentTitle = $(this).text();
                $(this).parent().parent().show();
                if (currentTitle.toLowerCase().indexOf(searchTitle) == -1) {
                    $(this).parent().parent().hide();
                }
            });
            var noItem = true;
            $(".alert").hide();
            $(".panel").each(function () {
                var isAllHide = true;
                $(this).show();
                var anchor = $(this).find("a span");
                anchor.each(function () {
                    if (!$(this).is(":hidden")) {
                        isAllHide = false;
                        noItem = false;
                    }
                });
                if (isAllHide) {
                    $(this).hide();
                }
            });
            if (noItem) {
                $(".alert").show();
            }
        });
    });
    function collapseShow(id) {
        $("#" + id).collapse('toggle');
    }
</script>